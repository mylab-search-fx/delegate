# Лог изменений

Все заметные изменения в этом проекте будут отражаться в этом документе.

Формат лога изменений базируется на [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

## [1.7.7] - 2022-05-26

### Добавлено

*  [API v4](https://app.swaggerhub.com/apis/ozzy/mylab-search-searcher/4)
*  поддержка `wildcard`(`*`) идентификаторов индексов в запросе токена поиска

### Изменено

* замена термина `namespace` на `index` с обратной совместимостью
* переименован узел конфигурации `Searcher/Namespaces` -> `Searcher/Indexes`
* переименован узел конфигурации `Searcher/Namespaces/Name` -> `Searcher/Index/Id`
* переименован узел конфигурации `Searcher/Namespaces/Index` -> `Searcher/Index/EsIndex`
* переименован узел конфигурации `Searcher/IndexNamePrefix` -> `Searcher/EsIndexNamePrefix`
* переименован узел конфигурации `Searcher/IndexNamePostfix` -> `Searcher/EsIndexNamePostfix`

## [1.6.7] - 2022-05-18

### Изменено

* название проекта на `MyLab.Search.Searcher`
* адрес `nuget` https://www.nuget.org/packages/MyLab.Search.Searcher.Client
* адрес `docker` образа https://github.com/mylab-search-fx/searcher/pkgs/container/searcher
* имя `docker` образа `ghcr.io/mylab-search-fx/searcher`
* имя корневого узла конфигурации `Delegate` -> `Searcher`, что в т.ч. влияет и на переменные окружения для конфигурирования
* путь к файлам-сортировкам по умолчанию `/etc/mylab-search-searcher/sort/`
* путь к файлам-фильтрам по умолчанию `/etc/mylab-search-searcher/filter/`

## [1.5.7] - 2022-04-06

### Изменено

* обновление MyLab.WerErrors с исправленным поведением в логировании необработанных исключений 

## [1.5.6] - 2022-03-30

### Добавлено

* `API v3` с поддержкой передачи аргументов для сортировок

## [1.4.6] - 2022-03-10

### Исправлено

* время жизни токена отсчитывается от универсального времени, а не от локального

## [1.4.5] - 2022-02-24

### Исправлено

* игнорировались настройки пространства имён поиска из токена, если в списке в токене узел с настройками был не на первом месте

## [1.4.4] - 2021-12-15

### Добавлено

* поддержка слов с разделителями в строке поиска (разделение слов по пробельным символам) при поиске по текстовым полям;

## [1.4.3] - 2021-09-21

### Добавлено

* `API v2`
* в `v2` запрос поиска `POST` и параметры поиска в теле запроса в `json` формате
* в `v2` изменилась форма указания фильтров в поиске
* в `v2` изменилась форма указания пространств имён в запросе токена
* в `v2` изменилась форма указания пространств имён в токене

### Изменено

* токены формата `v1` более не поддерживаются
* `API v1` выдаёт токены `v2`

## [1.3.3] - 2021-09-03

### Изменено

* сортировка по релевантности + сортировка по умолчанию, если не указана сортировка в запросе и указана строка поиска

### Добавлено

* параметр режима поиска по строке поиска (стратегия поиска по строке поиска для сервера) `query-mode`

## [1.2.3] - 2021-09-03

### Добавлено

* в ответ добавлено поле `Total` - общее количество найденный сущностей до применения пэйджинга 
* при включении отладки, в ответ для каждой сущности добавляется поле `Explanation` - объясняет причину выборки
* при включении отладки, в ответ добавляется поле с запросом поиска в `Elasticsearch`
* поиск по началу полей типа `keyword`
* регистронезависимый поиск по по началу полей типа  `text` 
* выбор стратегии поиска по строке поиска через конфиг
* поддержка префиксов `IndexNamePrefix` и постфиксов `IndexNamePostfix` имён индексов через конфиг

## [1.1.3] - 2021-09-01

### Добавлено

* поддержка дат строки поиска в формате `ddMMyy`, где `yy` - двузначный год текущего столетия
* в `readme` добавлено описание разбора строки поиска

### Изменено

* определение литерала как числа не исключает попытку определить его как дату 
* более компактный `warning` в логе при встрече в мэппинге индекса неподдерживаемого типа поля для конструирования условий по строке поиска 

## [1.1.2] - 2021-08-27

### Добавлено:

* ключ для контракта сервиса в интерфейсе

## [1.1.1] - 2021-08-27

### Изменено

* узел конфигурации подключения к Elasitcsearch переименован `Elasticsearch` -> `ES` 
* изменился базовый адрес контроллеров - теперь без `/api/`
* `500` ошибка, если при поиске `ES` вернул ответ отличный от `200`

### Добавлено

* `Client` проект с контрактами сервиса и данных 

